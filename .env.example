# ================================================
# EasySSH 环境配置
# ================================================

# 运行环境
ENV=production  # development | production

# ================================
# 数据库配置 (PostgreSQL)
# ================================
DB_HOST=postgres  # Docker: postgres | 开发: localhost
DB_PORT=5432
DB_USER=easyssh
DB_NAME=easyssh_db
DB_PASSWORD=CHANGE_ME_IN_PRODUCTION  # ⚠️ 生产环境请修改 | 生成: openssl rand -base64 16
DB_SSLMODE=disable  # disable | require | verify-ca | verify-full

# 数据库连接池配置
DB_MAX_IDLE_CONNS=10  # 最大空闲连接数 (1-100)
DB_MAX_OPEN_CONNS=100  # 最大打开连接数 (1-1000)
DB_CONN_MAX_LIFETIME=60  # 连接最大生命周期 (分钟, 1-1440)
DB_CONN_MAX_IDLE_TIME=10  # 连接最大空闲时间 (分钟, 1-60)

# ================================
# 缓存配置 (Redis)
# ================================
REDIS_HOST=redis  # Docker: redis | 开发: localhost
REDIS_PORT=6379
REDIS_PASSWORD=  # 留空表示无密码

# ================================
# 端口配置
# ================================
PORT=8521  # 后端服务端口
WEB_PORT=8520  # 前端服务端口

# ================================
# 安全密钥
# ================================
JWT_SECRET=CHANGE_ME_IN_PRODUCTION  # ⚠️ 至少 64 字符 | 生成: openssl rand -base64 48
ENCRYPTION_KEY=CHANGE_ME_IN_PRODUCTION_32BYTE  # ⚠️ 必须 32 字节 | 生成: openssl rand -base64 24

# JWT 令牌过期时间配置
# 访问令牌：短效
JWT_ACCESS_EXPIRE_MINUTES=15  # 访问令牌过期时间 (分钟, 5-1440)

# 刷新令牌：滑动过期 + 绝对上限
JWT_REFRESH_IDLE_EXPIRE_DAYS=7  # 闲置上限（最后活跃时间 + 7 天内可续期）
JWT_REFRESH_ABSOLUTE_EXPIRE_DAYS=30  # 绝对上限（最长会话 30 天）

# 刷新令牌安全机制
JWT_REFRESH_ROTATE=true  # 刷新令牌轮换（每次刷新生成新令牌）
JWT_REFRESH_REUSE_DETECTION=true  # 复用检测（旧令牌再用立即封禁）

# ================================
# Cookie 配置
# ================================
COOKIE_SECURE=true  # HTTPS 环境设置为 true | HTTP 环境必须为 false
COOKIE_DOMAIN=  # Cookie 域名，留空表示当前域名

# ================================
# 前端配置
# ================================
NEXT_PUBLIC_API_BASE=http://localhost:8521  # ⚠️ Docker: http://backend:8521 | 生产: https://api.yourdomain.com

