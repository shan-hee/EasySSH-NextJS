# ==========================================================
# EasySSH 环境变量示例（复制为 .env 后按需修改）
# ==========================================================

# 运行模式
# - development：开发
# - production：生产
ENV=production

# ----------------------------------------------------------
# 端口与服务地址
# ----------------------------------------------------------
# 前端开发端口（开发时使用）
WEB_PORT=8520

# 后端服务端口（Go API + 静态文件托管）
PORT=8521

# 后端 API 地址（前端开发时使用）
# 本地开发：http://localhost:8521
# 生产环境：留空（使用相对路径）
NEXT_PUBLIC_API_BASE=

# ----------------------------------------------------------
# 安全与 Cookie（Cookie-only 认证相关）
# ----------------------------------------------------------
# JWT 密钥（请务必替换为强随机值）
# 生成方式：openssl rand -base64 48
JWT_SECRET=CHANGE_ME_IN_PRODUCTION
# 加密密钥（32字节）
# 生成方式：openssl rand -base64 24
ENCRYPTION_KEY=CHANGE_ME_IN_PRODUCTION_32BYTE

# Cookie 安全策略
# - COOKIE_SECURE：HTTPS 环境必须 true；HTTP 开发环境必须 false
# - COOKIE_DOMAIN：Cookie 域名（多子域共享时设置为 .example.com），留空表示当前域
# - COOKIE_SAMESITE：lax | none | strict
#   • 同源/同站：lax（推荐）
#   • 跨域直连：none（必须搭配 HTTPS，即 COOKIE_SECURE=true）
COOKIE_SECURE=true
COOKIE_DOMAIN=
COOKIE_SAMESITE=lax

# ----------------------------------------------------------
# JWT 过期与刷新
# ----------------------------------------------------------
# 访问令牌过期时间（分钟，5-1440）
JWT_ACCESS_EXPIRE_MINUTES=15
# 刷新令牌：滑动过期与绝对上限（天）
JWT_REFRESH_IDLE_EXPIRE_DAYS=7
JWT_REFRESH_ABSOLUTE_EXPIRE_DAYS=30
# 刷新令牌安全机制
JWT_REFRESH_ROTATE=true
JWT_REFRESH_REUSE_DETECTION=true

# ----------------------------------------------------------
# 数据库配置（PostgreSQL）
# ----------------------------------------------------------
# Docker Compose：DB_HOST=postgres；本地开发：DB_HOST=localhost
DB_HOST=postgres
DB_PORT=5432
DB_USER=easyssh
DB_NAME=easyssh_db
DB_PASSWORD=CHANGE_ME_IN_PRODUCTION # 生成方式：openssl rand -base64 16
DB_SSLMODE=disable  # disable | require | verify-ca | verify-full

# 数据库连接池参数
DB_MAX_IDLE_CONNS=10
DB_MAX_OPEN_CONNS=100
DB_CONN_MAX_LIFETIME=60   # 分钟
DB_CONN_MAX_IDLE_TIME=10  # 分钟

# ----------------------------------------------------------
# 缓存配置（Redis）
# ----------------------------------------------------------
# Docker Compose：REDIS_HOST=redis；本地开发：REDIS_HOST=localhost
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
